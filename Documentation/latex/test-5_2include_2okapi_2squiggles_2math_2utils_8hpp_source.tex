\hypertarget{test-5_2include_2okapi_2squiggles_2math_2utils_8hpp_source}{}\doxysection{utils.\+hpp}
\label{test-5_2include_2okapi_2squiggles_2math_2utils_8hpp_source}\index{Pros/test-\/5/include/okapi/squiggles/math/utils.hpp@{Pros/test-\/5/include/okapi/squiggles/math/utils.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#ifndef \_MATH\_UTILS\_HPP\_}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#define \_MATH\_UTILS\_HPP\_}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <cmath>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{12 }
\DoxyCodeLine{13 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacesquiggles}{squiggles}} \{}
\DoxyCodeLine{20 \textcolor{keyword}{template} <\textcolor{keyword}{class} T> \textcolor{keyword}{inline} \textcolor{keywordtype}{int} \mbox{\hyperlink{namespacesquiggles_a7d5922fe40a5476e8b5a8a015bd2bac4}{sgn}}(T v) \{}
\DoxyCodeLine{21   \textcolor{keywordflow}{return} (v > T(0)) -\/ (v < T(0));}
\DoxyCodeLine{22 \}}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \textcolor{keyword}{inline} \textcolor{keywordtype}{bool}}
\DoxyCodeLine{25 nearly\_equal(\textcolor{keyword}{const} \textcolor{keywordtype}{double}\& a, \textcolor{keyword}{const} \textcolor{keywordtype}{double}\& b, \textcolor{keywordtype}{double} epsilon = 1e-\/5) \{}
\DoxyCodeLine{26   \textcolor{keywordflow}{return} std::fabs(a -\/ b) < epsilon;}
\DoxyCodeLine{27 \}}
\DoxyCodeLine{28 \} \textcolor{comment}{// namespace squiggles}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30 \textcolor{keyword}{namespace }std \{}
\DoxyCodeLine{31 \textcolor{comment}{// Copied from https://github.com/emsr/cxx\_linear}}
\DoxyCodeLine{32 \textcolor{keyword}{template} <\textcolor{keyword}{typename} \_Float>}
\DoxyCodeLine{33 \textcolor{keyword}{constexpr} std::enable\_if\_t<}
\DoxyCodeLine{34   std::is\_floating\_point\_v<\_Float> \&\&}
\DoxyCodeLine{35     \_\_cplusplus <= 201703L, \textcolor{comment}{// Only defines this function if C++ standard < 20}}
\DoxyCodeLine{36   \_Float>}
\DoxyCodeLine{37 lerp(\_Float \_\_a, \_Float \_\_b, \_Float \_\_t) \{}
\DoxyCodeLine{38   \textcolor{keywordflow}{if} (std::isnan(\_\_a) || std::isnan(\_\_b) || std::isnan(\_\_t))}
\DoxyCodeLine{39     \textcolor{keywordflow}{return} std::numeric\_limits<\_Float>::quiet\_NaN();}
\DoxyCodeLine{40   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} ((\_\_a <= \_Float\{0\} \&\& \_\_b >= \_Float\{0\}) ||}
\DoxyCodeLine{41            (\_\_a >= \_Float\{0\} \&\& \_\_b <= \_Float\{0\}))}
\DoxyCodeLine{42   \textcolor{comment}{// ab <= 0 but product could overflow.}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#ifndef FMA}}
\DoxyCodeLine{44     \textcolor{keywordflow}{return} \_\_t * \_\_b + (\_Float\{1\} -\/ \_\_t) * \_\_a;}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{46     \textcolor{keywordflow}{return} std::fma(\_\_t, \_\_b, (\_Float\{1\} -\/ \_\_t) * \_\_a);}
\DoxyCodeLine{47 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{48   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\_\_t == \_Float\{1\})}
\DoxyCodeLine{49     \textcolor{keywordflow}{return} \_\_b;}
\DoxyCodeLine{50   \textcolor{keywordflow}{else} \{ \textcolor{comment}{// monotonic near t == 1.}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#ifndef FMA}}
\DoxyCodeLine{52     \textcolor{keyword}{const} \textcolor{keyword}{auto} \_\_x = \_\_a + \_\_t * (\_\_b -\/ \_\_a);}
\DoxyCodeLine{53 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{54     \textcolor{keyword}{const} \textcolor{keyword}{auto} \_\_x = std::fma(\_\_t, \_\_b -\/ \_\_a, \_\_a);}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{56     \textcolor{keywordflow}{return} (\_\_t > \_Float\{1\}) == (\_\_b > \_\_a) ? std::max(\_\_b, \_\_x)}
\DoxyCodeLine{57                                             : std::min(\_\_b, \_\_x);}
\DoxyCodeLine{58   \}}
\DoxyCodeLine{59 \}}
\DoxyCodeLine{60 \} \textcolor{comment}{// namespace std}}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
