\hypertarget{test-6_2include_2okapi_2api_2control_2async_2async_motion_profile_controller_8hpp_source}{}\doxysection{async\+Motion\+Profile\+Controller.\+hpp}
\label{test-6_2include_2okapi_2api_2control_2async_2async_motion_profile_controller_8hpp_source}\index{Pros/test-\/6/include/okapi/api/control/async/asyncMotionProfileController.hpp@{Pros/test-\/6/include/okapi/api/control/async/asyncMotionProfileController.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/*}}
\DoxyCodeLine{2 \textcolor{comment}{ * This Source Code Form is subject to the terms of the Mozilla Public}}
\DoxyCodeLine{3 \textcolor{comment}{ * License, v. 2.0. If a copy of the MPL was not distributed with this}}
\DoxyCodeLine{4 \textcolor{comment}{ * file, You can obtain one at http://mozilla.org/MPL/2.0/.}}
\DoxyCodeLine{5 \textcolor{comment}{ */}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}okapi/api/chassis/controller/chassisScales.hpp"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}okapi/api/chassis/model/skidSteerModel.hpp"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}okapi/api/control/async/asyncPositionController.hpp"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}okapi/api/control/util/pathfinderUtil.hpp"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}okapi/api/units/QAngularSpeed.hpp"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}okapi/api/units/QSpeed.hpp"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}okapi/api/util/logging.hpp"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}okapi/api/util/timeUtil.hpp"{}}}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#include <atomic>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{19 }
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}squiggles.hpp"{}}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22 \textcolor{keyword}{namespace }okapi \{}
\DoxyCodeLine{23 \textcolor{keyword}{class }AsyncMotionProfileController : \textcolor{keyword}{public} AsyncPositionController<std::string, PathfinderPoint> \{}
\DoxyCodeLine{24   \textcolor{keyword}{public}:}
\DoxyCodeLine{36   \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a7552d4d18213b79ec0fc0e65a3294305}{AsyncMotionProfileController}}(\textcolor{keyword}{const} \mbox{\hyperlink{classokapi_1_1_time_util}{TimeUtil}} \&itimeUtil,}
\DoxyCodeLine{37                                \textcolor{keyword}{const} \mbox{\hyperlink{structokapi_1_1_pathfinder_limits}{PathfinderLimits}} \&ilimits,}
\DoxyCodeLine{38                                \textcolor{keyword}{const} std::shared\_ptr<ChassisModel> \&imodel,}
\DoxyCodeLine{39                                \textcolor{keyword}{const} \mbox{\hyperlink{classokapi_1_1_chassis_scales}{ChassisScales}} \&iscales,}
\DoxyCodeLine{40                                \textcolor{keyword}{const} \mbox{\hyperlink{structokapi_1_1_abstract_motor_1_1_gearset_ratio_pair}{AbstractMotor::GearsetRatioPair}} \&ipair,}
\DoxyCodeLine{41                                \textcolor{keyword}{const} std::shared\_ptr<Logger> \&ilogger = \mbox{\hyperlink{classokapi_1_1_logger_ac9dd2e38a412a692816f150b0ac3f0b4}{Logger::getDefaultLogger}}());}
\DoxyCodeLine{42 }
\DoxyCodeLine{43   \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller}{AsyncMotionProfileController}}(\mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller}{AsyncMotionProfileController}} \&\&other) = \textcolor{keyword}{delete};}
\DoxyCodeLine{44 }
\DoxyCodeLine{45   \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller}{AsyncMotionProfileController}} \&operator=(\mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller}{AsyncMotionProfileController}} \&\&other) = \textcolor{keyword}{delete};}
\DoxyCodeLine{46 }
\DoxyCodeLine{47   \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller}{\string~AsyncMotionProfileController}}() \textcolor{keyword}{override};}
\DoxyCodeLine{48 }
\DoxyCodeLine{60   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a3b8ba2a691bea6f1cf7596f0ecb8b899}{generatePath}}(std::initializer\_list<PathfinderPoint> iwaypoints, \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{61 }
\DoxyCodeLine{78   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a4b01625204f9949abd00e54513e3b1fa}{generatePath}}(std::initializer\_list<PathfinderPoint> iwaypoints,}
\DoxyCodeLine{79                     \textcolor{keyword}{const} std::string \&ipathId,}
\DoxyCodeLine{80                     \textcolor{keyword}{const} \mbox{\hyperlink{structokapi_1_1_pathfinder_limits}{PathfinderLimits}} \&ilimits);}
\DoxyCodeLine{81 }
\DoxyCodeLine{90   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a6c6a889067dbb3a54c33f829b3aa1246}{removePath}}(\textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{91 }
\DoxyCodeLine{97   std::vector<std::string> \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a5853ae5af552cf56f36c9563733c6ace}{getPaths}}();}
\DoxyCodeLine{98 }
\DoxyCodeLine{105   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_adf705d6bfd3d0a83d8a6c50a05ffd156}{setTarget}}(std::string ipathId) \textcolor{keyword}{override};}
\DoxyCodeLine{106 }
\DoxyCodeLine{115   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a2846d2e36b86b39aa2e761e4e34cd225}{setTarget}}(std::string ipathId, \textcolor{keywordtype}{bool} ibackwards, \textcolor{keywordtype}{bool} imirrored = \textcolor{keyword}{false});}
\DoxyCodeLine{116 }
\DoxyCodeLine{121   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a292b22f53ed0ef67a479e00c92f68e3f}{controllerSet}}(std::string ivalue) \textcolor{keyword}{override};}
\DoxyCodeLine{122 }
\DoxyCodeLine{128   std::string \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a9f9e44e987481619cbec37d5e35c71e8}{getTarget}}() \textcolor{keyword}{override};}
\DoxyCodeLine{129 }
\DoxyCodeLine{135   std::string \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a1f765e518f51cf1c59be2dedac71e562}{getProcessValue}}() \textcolor{keyword}{const override};}
\DoxyCodeLine{136 }
\DoxyCodeLine{141   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a0b08d2f39d786739a734c50523db1eb2}{waitUntilSettled}}() \textcolor{keyword}{override};}
\DoxyCodeLine{142 }
\DoxyCodeLine{151   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a027d632b17e5e9e0acbcb5b4000d038c}{moveTo}}(std::initializer\_list<PathfinderPoint> iwaypoints,}
\DoxyCodeLine{152               \textcolor{keywordtype}{bool} ibackwards = \textcolor{keyword}{false},}
\DoxyCodeLine{153               \textcolor{keywordtype}{bool} imirrored = \textcolor{keyword}{false});}
\DoxyCodeLine{154 }
\DoxyCodeLine{164   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a5845299e779fc876f6226aa083ddfaa8}{moveTo}}(std::initializer\_list<PathfinderPoint> iwaypoints,}
\DoxyCodeLine{165               \textcolor{keyword}{const} \mbox{\hyperlink{structokapi_1_1_pathfinder_limits}{PathfinderLimits}} \&ilimits,}
\DoxyCodeLine{166               \textcolor{keywordtype}{bool} ibackwards = \textcolor{keyword}{false},}
\DoxyCodeLine{167               \textcolor{keywordtype}{bool} imirrored = \textcolor{keyword}{false});}
\DoxyCodeLine{168 }
\DoxyCodeLine{176   \mbox{\hyperlink{structokapi_1_1_pathfinder_point}{PathfinderPoint}} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_aae5c2ef0766fba9e635c43c0314da10a}{getError}}() \textcolor{keyword}{const override};}
\DoxyCodeLine{177 }
\DoxyCodeLine{186   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_abfc944ba6d703dc1aa6fb16a44b5e395}{isSettled}}() \textcolor{keyword}{override};}
\DoxyCodeLine{187 }
\DoxyCodeLine{192   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a9ad15272defac4db5e2b318671eb3850}{reset}}() \textcolor{keyword}{override};}
\DoxyCodeLine{193 }
\DoxyCodeLine{198   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a7069b2b7373aec21c84369392d8d34d8}{flipDisable}}() \textcolor{keyword}{override};}
\DoxyCodeLine{199 }
\DoxyCodeLine{206   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a3dc30b14b36f1fc1fc61c9c45ced002e}{flipDisable}}(\textcolor{keywordtype}{bool} iisDisabled) \textcolor{keyword}{override};}
\DoxyCodeLine{207 }
\DoxyCodeLine{213   \textcolor{keywordtype}{bool} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a04bc0f7be2c116163bfbef0571dec2ef}{isDisabled}}() \textcolor{keyword}{const override};}
\DoxyCodeLine{214 }
\DoxyCodeLine{219   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_afc3476c87e3428f9f166273688e45249}{tarePosition}}() \textcolor{keyword}{override};}
\DoxyCodeLine{220 }
\DoxyCodeLine{227   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a8c8214249732c79d48601a2da579f220}{setMaxVelocity}}(std::int32\_t imaxVelocity) \textcolor{keyword}{override};}
\DoxyCodeLine{228 }
\DoxyCodeLine{233   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_af54f59d0269d84b12eb148271e349646}{startThread}}();}
\DoxyCodeLine{234 }
\DoxyCodeLine{238   \mbox{\hyperlink{class_crossplatform_thread}{CrossplatformThread}} *\mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_aaac5113b3567c28dc1c5ba0dcf7facdd}{getThread}}() \textcolor{keyword}{const};}
\DoxyCodeLine{239 }
\DoxyCodeLine{248   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_ad588aa51d62169159ff5e4b05ad3982c}{storePath}}(\textcolor{keyword}{const} std::string \&idirectory, \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{249 }
\DoxyCodeLine{257   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a87c74350a819a3a322321be787c32d1f}{loadPath}}(\textcolor{keyword}{const} std::string \&idirectory, \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{258 }
\DoxyCodeLine{265   \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_ace5f9053d3455e6f5e69c63f1196521e}{forceRemovePath}}(\textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{266 }
\DoxyCodeLine{267   \textcolor{keyword}{protected}:}
\DoxyCodeLine{268   std::shared\_ptr<Logger> logger;}
\DoxyCodeLine{269   std::map<std::string, std::vector<squiggles::ProfilePoint>> paths\{\};}
\DoxyCodeLine{270   \mbox{\hyperlink{structokapi_1_1_pathfinder_limits}{PathfinderLimits}} limits;}
\DoxyCodeLine{271   std::shared\_ptr<ChassisModel> model;}
\DoxyCodeLine{272   \mbox{\hyperlink{classokapi_1_1_chassis_scales}{ChassisScales}} scales;}
\DoxyCodeLine{273   \mbox{\hyperlink{structokapi_1_1_abstract_motor_1_1_gearset_ratio_pair}{AbstractMotor::GearsetRatioPair}} pair;}
\DoxyCodeLine{274   \mbox{\hyperlink{classokapi_1_1_time_util}{TimeUtil}} timeUtil;}
\DoxyCodeLine{275 }
\DoxyCodeLine{276   \textcolor{comment}{// This must be locked when accessing the current path}}
\DoxyCodeLine{277   \mbox{\hyperlink{class_crossplatform_mutex}{CrossplatformMutex}} currentPathMutex;}
\DoxyCodeLine{278 }
\DoxyCodeLine{279   std::string currentPath\{\textcolor{stringliteral}{"{}"{}}\};}
\DoxyCodeLine{280   std::atomic\_bool isRunning\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{281   std::atomic\_int direction\{1\};}
\DoxyCodeLine{282   std::atomic\_bool mirrored\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{283   std::atomic\_bool disabled\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{284   std::atomic\_bool dtorCalled\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{285   \mbox{\hyperlink{class_crossplatform_thread}{CrossplatformThread}} *task\{\textcolor{keyword}{nullptr}\};}
\DoxyCodeLine{286 }
\DoxyCodeLine{287   \textcolor{keyword}{static} \textcolor{keywordtype}{void} trampoline(\textcolor{keywordtype}{void} *context);}
\DoxyCodeLine{288   \textcolor{keywordtype}{void} loop();}
\DoxyCodeLine{289 }
\DoxyCodeLine{293   \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a08b04700196f0ffe858bbddd9c949b29}{executeSinglePath}}(\textcolor{keyword}{const} std::vector<squiggles::ProfilePoint> \&path,}
\DoxyCodeLine{294                                  std::unique\_ptr<AbstractRate> rate);}
\DoxyCodeLine{295 }
\DoxyCodeLine{302   QAngularSpeed \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a74b2981453d36e01c30b66c522bdcb52}{convertLinearToRotational}}(QSpeed linear) \textcolor{keyword}{const};}
\DoxyCodeLine{303 }
\DoxyCodeLine{304   std::string getPathErrorMessage(\textcolor{keyword}{const} std::vector<PathfinderPoint> \&points,}
\DoxyCodeLine{305                                   \textcolor{keyword}{const} std::string \&ipathId,}
\DoxyCodeLine{306                                   \textcolor{keywordtype}{int} length);}
\DoxyCodeLine{307 }
\DoxyCodeLine{316   \textcolor{keyword}{static} std::string \mbox{\hyperlink{classokapi_1_1_async_motion_profile_controller_a740306a171c4124be44f0763da9700ce}{makeFilePath}}(\textcolor{keyword}{const} std::string \&directory, \textcolor{keyword}{const} std::string \&filename);}
\DoxyCodeLine{317 }
\DoxyCodeLine{318   \textcolor{keywordtype}{void} internalStorePath(std::ostream \&file, \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{319   \textcolor{keywordtype}{void} internalLoadPath(std::istream \&file, \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{320   \textcolor{keywordtype}{void} internalLoadPathfinderPath(std::istream \&leftFile,}
\DoxyCodeLine{321                                   std::istream \&rightFile,}
\DoxyCodeLine{322                                   \textcolor{keyword}{const} std::string \&ipathId);}
\DoxyCodeLine{323 }
\DoxyCodeLine{324   \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keywordtype}{double} DT = 0.01;}
\DoxyCodeLine{325 \};}
\DoxyCodeLine{326 \} \textcolor{comment}{// namespace okapi}}

\end{DoxyCode}
